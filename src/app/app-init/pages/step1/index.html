<div ng-init="loadSettings()"></div>
<form class="needs-validation" novalidate>
    <h1 class="lead">Hi there! We're setting up your website.
    </h1>
    <hr>
    <div class="intruction-labels">
        <div class="form-group">
            <label>
                Your Website Name
            </label>
            <input type="text" ng-model="initCmsModel.siteName" class="form-control" required placeholder="My Best Site Ever! - Mixcore CMS" value="My Best Site Ever! - Mixcore CMS">
        </div>
        <div class="form-group">
            <label>
                1st Culture & Language
            </label>
            <select id="inputState" class="form-control custom-select custom-select-sm"
                ng-options="item as item.fullName for item in settings.cultures track by item.specificulture"
                ng-model="initCmsModel.culture">
            </select>
        </div>
        <hr class="mt-4">
        <div class="form-group pb-4">
            <strong class="col-8 strong pl-0">
                Database Configuration
                <div class="float-right">
                    <div class="btn-group  pl-sm-0" role="group" aria-label="Basic example">
                        <button type="button" class="btn btn-primary active" ng-click="initCmsModel.isUseLocal=!initCmsModel.isUseLocal" ng-class="{ 'active' : !initCmsModel.isUseLocal }">Remote</button>
                        <button type="button" class="btn btn-primary" ng-click="initCmsModel.isUseLocal=!initCmsModel.isUseLocal" ng-class="{ 'active' : initCmsModel.isUseLocal }">Local</button>
                    </div>
                </div>
            </strong>
            <!-- <div class="col-4 text-right">
                <span style="cursor: pointer;" ng-click="initCmsModel.isUseLocal=!initCmsModel.isUseLocal">
                    <span data-toggle="tooltip" data-placement="top" title="Click to change to remote database."
                        style="text-decoration: underline;" ng-if="initCmsModel.isUseLocal">local<i
                            class="fa fa-angle-down ml-1"></i></span>
                    <span data-toggle="tooltip" data-placement="top" title="Click to change to local database."
                        style="text-decoration: underline;" ng-if="!initCmsModel.isUseLocal">remote<i
                            class="fa fa-angle-down ml-1"></i></span>
                </span>
            </div> -->

        </div>
        <div class="form-group" ng-show="!initCmsModel.isUseLocal">
            <label>Server</label>
            <select class="custom-select form-control" ng-options="item as item.text for item in settings.providers"
                ng-model="dbProvider" ng-change="updateDbProvider()">
            </select>
        </div>
        <mssql-info ng-if="!initCmsModel.isUseLocal && dbProvider.value=='MSSQL'" init-cms-model="initCmsModel">
        </mssql-info>
        <mysql-info ng-if="!initCmsModel.isUseLocal && dbProvider.value=='MySQL'" init-cms-model="initCmsModel">
        </mysql-info>
        <!-- <posgresql-info ng-if="!initCmsModel.isUseLocal && dbProvider.value=='PostgreSQL'" init-cms-model="initCmsModel">
        </posgresql-info> -->
        <mssql-local-info ng-if="initCmsModel.isUseLocal" init-cms-model="initCmsModel">
        </mssql-local-info>
    </div>

    <hr class="mt-4">
    <div class="text-right">
        <button ng-if="!initCmsModel.isUseLocal" ng-click="initCms();" class="btn btn-primary" style="min-width:200px"
            ng-disabled="!initCmsModel.databaseServer || !initCmsModel.databaseName || !initCmsModel.databaseUser || !initCmsModel.culture">
            <span
                ng-if="!initCmsModel.databaseServer || !initCmsModel.databaseName || !initCmsModel.databaseUser || !initCmsModel.culture">Next
                <i class="fa fa-angle-right"></i></span>
            <span
                ng-if="initCmsModel.databaseServer && initCmsModel.databaseName && initCmsModel.databaseUser  && initCmsModel.culture">Connect</span>
        </button>
        <button ng-if="initCmsModel.isUseLocal" ng-click="initCms();" class="btn btn-primary" style="min-width:200px"
            ng-disabled="!initCmsModel.sqliteDbConnectionString || !initCmsModel.localDbName">
            <span ng-if="!initCmsModel.sqliteDbConnectionString || !initCmsModel.localDbName">Next <i
                    class="fa fa-angle-right"></i></span>
            <span ng-if="initCmsModel.sqliteDbConnectionString && initCmsModel.localDbName ">Next <i
                    class="fa fa-angle-right"></i></span>
        </button>
    </div>
</form>