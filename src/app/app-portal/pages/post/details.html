<form ng-class="{'submitted': submitted}" ng-submit="save()">
    <div class="container-xl">
        <!-- Page title -->
        <div class="page-header d-print-none">
            <div class="row align-items-center">
                <div class="col">
                    <!-- Page pre-title -->
                    <div class="page-pretitle">
                        Create
                    </div>
                    <h2 class="page-title">
                        New Post
                    </h2>
                </div>
                <!-- Page title actions -->
                <div class="col-auto ms-auto d-print-none">
                    <div class="btn-list">
                        <actions on-clear-cache="clearCache()" preview-url="viewmodel.detailsUrl"
                            back-url="referrerUrl">
                        </actions>
                        <!-- <span class="d-none d-sm-inline">
                            <a href="#" class="btn btn-white">
                                New view
                            </a>
                        </span>
                        <a href="#" class="btn btn-primary d-none d-sm-inline-block" data-bs-toggle="modal"
                            data-bs-target="#modal-report">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                            Create new report
                        </a>
                        <a href="#" class="btn btn-primary d-sm-none btn-icon" data-bs-toggle="modal"
                            data-bs-target="#modal-report" aria-label="Create new report">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                        </a> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-body">
        <div class="container-xl">

            <div class="col-12">
                <div class="cardx">
                    <ul class="nav nav-tabs" data-bs-toggle="tabs">
                        <li class="nav-item">
                            <a href="#tabs-home-7" class="nav-link active" data-bs-toggle="tab">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="icon icon-tabler icon-tabler-file-text me-2" width="24" height="24"
                                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z">
                                    </path>
                                    <line x1="9" y1="9" x2="10" y2="9"></line>
                                    <line x1="9" y1="13" x2="15" y2="13"></line>
                                    <line x1="9" y1="17" x2="15" y2="17"></line>
                                </svg>
                                Main Content</a>
                        </li>
                        <li class="nav-item">
                            <a href="#tabs-medias" class="nav-link" data-bs-toggle="tab">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-photo me-2"
                                    width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <line x1="15" y1="8" x2="15.01" y2="8"></line>
                                    <rect x="4" y="4" width="16" height="16" rx="3"></rect>
                                    <path d="M4 15l4 -4a3 5 0 0 1 3 0l5 5"></path>
                                    <path d="M14 14l1 -1a3 5 0 0 1 3 0l2 2"></path>
                                </svg>
                                Medias</a>
                        </li>
                        <li class="nav-item">
                            <a href="#tabs-profile-7" class="nav-link" data-bs-toggle="tab">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="icon icon-tabler icon-tabler-file-search me-2" width="24" height="24"
                                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                    <path d="M12 21h-5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v4.5"></path>
                                    <circle cx="16.5" cy="17.5" r="2.5"></circle>
                                    <line x1="18.5" y1="19.5" x2="21" y2="22"></line>
                                </svg>
                                SEO</a>
                        </li>
                        <li class="nav-item">
                            <a href="#tabs-rels" class="nav-link" data-bs-toggle="tab">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="icon icon-tabler icon-tabler-hierarchy me-2" width="24" height="24"
                                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="5" r="2"></circle>
                                    <circle cx="5" cy="19" r="2"></circle>
                                    <circle cx="19" cy="19" r="2"></circle>
                                    <path d="M6.5 17.5l5.5 -4.5l5.5 4.5"></path>
                                    <line x1="12" y1="7" x2="12" y2="13"></line>
                                </svg>
                                Relationship</a>
                        </li>
                        <li class="nav-item ms-auto">
                            <a href="#tabs-settings-7" class="nav-link" title="Settings" data-bs-toggle="tab">
                                <!-- Download SVG icon from http://tabler-icons.io/i/settings -->
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path
                                        d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                            </a>
                        </li>
                    </ul>
                    <div class="card-bodyx mt-3">
                        <div class="tab-content">
                            <div class="tab-pane active show" id="tabs-home-7">


                                <div class="row row-deck row-cards flex-row-reverse" ng-if="isAdmin">
                                    <div class="col-3">
                                        <div class="card">
                                            <dvi class="card-body">
                                                <div class="accordion accordion-flush" id="accordionFlushExample">
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="flush-headingOne">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapseOne"
                                                                aria-expanded="false" aria-controls="flush-collapseOne">
                                                                Basic informations
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapseOne" class="accordion-collapse collapse"
                                                            aria-labelledby="flush-headingOne"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <div class="mb-3">
                                                                    <statuses status="viewmodel.status"></statuses>
                                                                </div>
                                                                <div class="mb-3"
                                                                    ng-if="viewmodel.status == 'Schedule'">
                                                                    <label class="form-label">Published Date
                                                                        Time</label>
                                                                    <div class="input-group input-group-sm">
                                                                        <span class="input-group-text"
                                                                            id="basic-addon1">
                                                                            <i class="mi mi-Calendar"></i>
                                                                        </span>
                                                                        <input
                                                                            value="{{viewmodel.publishedDateTime | utcToLocal:'dd.MM.yy hh:mm a'}}"
                                                                            ng-model="viewmodel.publishedDateTime"
                                                                            type="datetime-local"
                                                                            class="form-control" />
                                                                    </div>
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label class="form-label">Created Date Time</label>
                                                                    <div class="input-group">
                                                                        <span class="input-group-text"
                                                                            id="basic-addon1"><i
                                                                                class="mi mi-Calendar"></i></span>
                                                                        <input ng-model="viewmodel.createdDateTime"
                                                                            type="datetime" class="form-control"
                                                                            readonly="readonly" />
                                                                    </div>
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label class="form-label">Author</label>
                                                                    <div class="input-group">
                                                                        <span class="input-group-text"
                                                                            id="basic-addon1"><i
                                                                                class="mi mi-Contact"></i></span>
                                                                        <input ng-model="viewmodel.createdBy"
                                                                            class="form-control" readonly="readonly" />
                                                                    </div>
                                                                </div>

                                                                <div class="mb-3">
                                                                    <!-- TODO: Hoang to check again -->
                                                                    <label class="form-label">Post type [
                                                                        <a href="/portal/mix-database-data/create?mixDatabaseId=9&mixDatabaseName=post_type&mixDatabaseTitle=Post%20Type&dataId=default"
                                                                            title="Add new post type to the list">
                                                                            +
                                                                        </a>
                                                                        ]</label>
                                                                    <select ng-init="loadPostTypes()"
                                                                        class="form-select"
                                                                        ng-options="item as item.title for item in postTypes track by item.id"
                                                                        ng-change="onSelectType()"
                                                                        ng-model="postType"></select>
                                                                </div>

                                                                <div class="mb-3 mb-0">
                                                                    <label class="form-label">Template</label>
                                                                    <div class="input-group">
                                                                        <span class="input-group-text"
                                                                            id="basic-addon1"><i
                                                                                class="mi mi-Layout"></i></span>
                                                                        <select class="form-select"
                                                                            ng-options="item as item.fileName for item in viewmodel.templates track by item.id"
                                                                            ng-model="viewmodel.view"></select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="flush-headingTwo">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapseTwo"
                                                                aria-expanded="false" aria-controls="flush-collapseTwo">
                                                                Languages
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapseTwo" class="accordion-collapse collapse"
                                                            aria-labelledby="flush-headingTwo"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <cultures is-clone="viewmodel.isClone"
                                                                    data="viewmodel.cultures">
                                                                </cultures>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="flush-headingThree">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapseThree"
                                                                aria-expanded="false"
                                                                aria-controls="flush-collapseThree">
                                                                Images
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapseThree"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="flush-headingThree"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <pills ng-if="viewmodel"
                                                                    select-callback="selectPane(pane)"
                                                                    class="mb-4 nav-fill">
                                                                    <pill header="Feature">
                                                                        <custom-image w="defaultFeatureImgWidth"
                                                                            h="defaultFeatureImgHeight"
                                                                            header="'Feature Upload'" type="'Posts'"
                                                                            folder="viewmodel.seoName"
                                                                            header="viewmodel.title"
                                                                            description="viewmodel.excerpt"
                                                                            src-url="viewmodel.imageUrl"
                                                                            src="viewmodel.image" auto="'true'">
                                                                        </custom-image>
                                                                    </pill>
                                                                    <pill header="Thumbnail">
                                                                        <custom-image w="defaultThumbnailImgWidth"
                                                                            h="defaultThumbnailImgHeight"
                                                                            header="'Thumbnail Upload'" type="'Posts'"
                                                                            folder="viewmodel.seoName"
                                                                            title="viewmodel.title"
                                                                            description="viewmodel.excerpt"
                                                                            src-url="viewmodel.thumbnailUrl"
                                                                            src="viewmodel.thumbnail" auto="'true'">
                                                                        </custom-image>
                                                                    </pill>
                                                                </pills>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="flush-heading-urlalias">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapse-urlalias"
                                                                aria-expanded="false"
                                                                aria-controls="flush-collapse-urlalias">
                                                                URL alias
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapse-urlalias"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="flush-heading-urlalias"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <!-- TODO: Hoang to check the add slugs button not working -->

                                                                <button
                                                                    class="btn btn-link text-primary btn-sm float-end py-0"
                                                                    type="button" ng-click="addAlias()">
                                                                    <span class="fas fa-plus text-primary"></span> Add
                                                                    slugs
                                                                </button>
                                                                <div id="slug-tab" class="card-body collapse-x">
                                                                    <url-alias ng-repeat="alias in viewmodel.urlAliases"
                                                                        ng-if="alias" index="$index" url-alias="alias"
                                                                        remove-callback="removeAliasCallback(index)">
                                                                    </url-alias>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="flush-heading-categories">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapse-categories"
                                                                aria-expanded="false"
                                                                aria-controls="flush-collapse-categories">
                                                                Categories
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapse-categories"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="flush-heading-categories"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <modal-nav-metas ng-if="viewmodel.sysCategories"
                                                                    header="'Categories'" parent-id="viewmodel.id"
                                                                    is-open="'show'" parent-type="'Post'" type="''"
                                                                    mix-database-name="'sys_category'"
                                                                    column-display="'title'"
                                                                    selected-list="viewmodel.sysCategories">
                                                                </modal-nav-metas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="flush-heading-tags">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapse-tags"
                                                                aria-expanded="false"
                                                                aria-controls="flush-collapse-tags">
                                                                Tags
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapse-tags"
                                                            class="accordion-collapse collapse"
                                                            aria-labelledby="flush-heading-tags"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <modal-nav-metas ng-if="viewmodel.sysTags"
                                                                    header="'Tags'" parent-id="viewmodel.id"
                                                                    is-open="'show'" parent-type="'Post'" type="''"
                                                                    mix-database-name="'sys_tag'"
                                                                    column-display="'title'"
                                                                    selected-list="viewmodel.sysTags"></modal-nav-metas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </dvi>
                                        </div>
                                    </div>
                                    <div class="col-9">
                                        <section class="" ng-init="getSingle()">
                                            <post-content model="viewmodel" additional-data="additionalData">
                                            </post-content>
                                        </section>
                                    </div>
                                </div>

                            </div>
                            <div class="tab-pane" id="tabs-medias">
                                <div class="row row-cards">
                                    <div class="col-md-4">

                                        <div class="card mb-3">
                                            <div class="card-header">
                                                Thumbnail
                                            </div>
                                            <div class="card-body">
                                                <custom-image w="defaultThumbnailImgWidth" h="defaultThumbnailImgHeight"
                                                    header="'Thumbnail Upload'" type="'Posts'"
                                                    folder="viewmodel.seoName" title="viewmodel.title"
                                                    description="viewmodel.excerpt" src-url="viewmodel.thumbnailUrl"
                                                    src="viewmodel.thumbnail" auto="'true'">
                                                </custom-image>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="card mb-3">
                                            <div class="card-header">
                                                Feature Image
                                            </div>
                                            <div class="card-body">
                                                <custom-image w="defaultFeatureImgWidth" h="defaultFeatureImgHeight"
                                                    header="'Feature Upload'" type="'Posts'" folder="viewmodel.seoName"
                                                    header="viewmodel.title" description="viewmodel.excerpt"
                                                    src-url="viewmodel.imageUrl" src="viewmodel.image" auto="'true'">
                                                </custom-image>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tabs-profile-7">
                                <post-seo post="viewmodel"></post-seo>
                            </div>
                            <div class="tab-pane" id="tabs-rels">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        Parents
                                    </div>
                                    <div class="card-body">
                                        <post-parents post="viewmodel"></post-parents>
                                    </div>
                                </div>
                                <div class="card mb-3" ng-init="getListRelated()">
                                    <div class="card-header">
                                        Related posts
                                    </div>
                                    <div class="card-body">
                                        <related-navs request="$scope.request" source-id="viewmodel.id"
                                            culture="viewmodel.specificulture" prefix="'post'" navs="viewmodel.postNavs"
                                            data="relatedData" load-data="getListRelated(pageIndex)">
                                        </related-navs>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tabs-settings-7">
                                <post-advanced model="viewmodel" additional-data="additionalData"></post-advanced>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- ----------------------------------------------------------- -->

        </div>
    </div>
</form>
